<hr class="my-5">
<div class="d-flex justify-content-between align-items-center mb-3">
	<h2>Gestion des Articles</h2>
</div>

<div class="table-responsive">
	<table class="table table-striped table-hover align-middle">
		<thead class="table-dark">
		<tr>
			<th>Titre</th>
			<th>Auteur</th>
			<th>Date</th>
			<th>Statut Actuel</th>
			<th class="text-center">Changer Statut</th>
			<th class="text-center">Supprimer</th>
		</tr>
		</thead>
		<tbody>
		{% for article in tousLesArticles %}
			<tr>
				<td>
					<a href="/{{ article.slug }}?id={{ article.id }}" target="_blank" class="fw-bold text-decoration-none text-body">
						{{ article.titre }}
					</a>
					<br>
					<small class="text-muted" style="font-size: 0.8rem;">Slug: {{ article.slug }}</small>
				</td>
				<td>{{ article.nom_utilisateur }}</td>
				<td>{{ article.date_creation|date("d/m/Y H:i") }}</td>

				<td>
					{% if article.statut == 'Publi√©' %}
						<span class="badge bg-success">Publi√©</span>
					{% elseif article.statut == 'Archiv√©' %}
						<span class="badge bg-warning text-dark">Archiv√©</span>
					{% else %}
						<span class="badge bg-secondary">Brouillon</span>
					{% endif %}
				</td>

				<td class="text-center">
					<div class="d-flex justify-content-center gap-2">
						{% if article.statut != 'Publi√©' %}
							<form action="/changerStatutArticle" method="POST">
								<input type="hidden" name="article_id" value="{{ article.id }}">
								<input type="hidden" name="statut" value="Publi√©">
								<button type="submit" class="btn btn-sm btn-success" title="Publier">Publier</button>
							</form>
						{% endif %}

						{% if article.statut != 'Archiv√©' %}
							<form action="/changerStatutArticle" method="POST">
								<input type="hidden" name="article_id" value="{{ article.id }}">
								<input type="hidden" name="statut" value="Archiv√©">
								<button type="submit" class="btn btn-sm btn-warning" title="Archiver">Archiver</button>
							</form>
						{% endif %}

						{% if article.statut != 'Brouillon' %}
							<form action="/changerStatutArticle" method="POST">
								<input type="hidden" name="article_id" value="{{ article.id }}">
								<input type="hidden" name="statut" value="Brouillon">
								<button type="submit" class="btn btn-sm btn-secondary" title="Mettre en brouillon">Brouillon</button>
							</form>
						{% endif %}
					</div>
				</td>

				<td class="text-center">
					<form action="/supprimerArticle" method="POST"
						  onsubmit="return confirm('√ätes-vous s√ªr de vouloir supprimer cet article ?');">
						<input type="hidden" name="article_id" value="{{ article.id }}">
						<button type="submit" class="btn btn-danger btn-sm">üóëÔ∏è</button>
					</form>
				</td>
			</tr>
		{% else %}
			<tr><td colspan="6" class="text-center">Aucun article trouv√©.</td></tr>
		{% endfor %}
		</tbody>
	</table>
</div>